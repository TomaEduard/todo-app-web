{"ast":null,"code":"import _classCallCheck from \"C:\\\\IT\\\\Javascript\\\\2. React\\\\todo-app-web\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"C:\\\\IT\\\\Javascript\\\\2. React\\\\todo-app-web\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"C:\\\\IT\\\\Javascript\\\\2. React\\\\todo-app-web\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"C:\\\\IT\\\\Javascript\\\\2. React\\\\todo-app-web\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"C:\\\\IT\\\\Javascript\\\\2. React\\\\todo-app-web\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/inherits\";\nvar _jsxFileName = \"C:\\\\IT\\\\Javascript\\\\2. React\\\\todo-app-web\\\\src\\\\components\\\\todo\\\\ListTodosComponent.jsx\";\nimport React, { Component } from 'react';\nimport TodoDataService from '../../api/todo/TodoDataService.js';\nimport AuthenticationService from './AuthenticationService.js';\nimport moment from 'moment';\n\nvar ListTodosComponent =\n/*#__PURE__*/\nfunction (_Component) {\n  _inherits(ListTodosComponent, _Component);\n\n  function ListTodosComponent(props) {\n    var _this;\n\n    _classCallCheck(this, ListTodosComponent);\n\n    // accept props\n    console.log('constructor');\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(ListTodosComponent).call(this, props)); // pass props to super class\n\n    _this.componentDidMount = function () {\n      console.log('componentDidMount');\n\n      _this.refreshTodos();\n\n      console.log(_this.state);\n    };\n\n    _this.refreshTodos = function () {\n      try {\n        var username = AuthenticationService.getLoggedInUserName();\n        TodoDataService.retrieveAllTodos(username).then(function (response) {\n          //console.log(response);\n          _this.setState({\n            todos: response.data\n          });\n        });\n      } catch (e) {\n        console.log(e.response); // undefined\n      }\n    };\n\n    _this.deleteTodoClicked = function (id) {\n      var username = AuthenticationService.getLoggedInUserName();\n      console.log('#1 ', id + \" \" + username);\n      TodoDataService.deleteTodo(username, id);\n      console.log('#3 ', id + \" \" + username).then(function (response) {\n        _this.setState({\n          message: \"Delete of todo \".concat(id, \" Successful\")\n        });\n\n        _this.refreshTodos();\n      });\n    };\n\n    _this.addTodoClicked = function () {\n      _this.props.history.push(\"/todos/-1\");\n    };\n\n    _this.updateTodoClicked = function (id) {\n      console.log('update ' + id);\n\n      _this.props.history.push(\"/todos/\".concat(id)); // /todos/${id}\n      // let username = AuthenticationService.getLoggedInUserName()\n      // //console.log(id + \" \" + username);\n      // TodoDataService.deleteTodo(username, id)\n      //  .then (\n      //      response => {\n      //         this.setState({message : `Delete of todo ${id} Successful`})\n      //         this.refreshTodos()\n      //      }\n      //  )\n\n    };\n\n    _this.state = {\n      todos: [],\n      message: null // this.deleteTodoClicked = this.deleteTodoClicked.bind(this)   \n      // this.updateTodoClicked = this.updateTodoClicked.bind(this)   \n      // this.addTodoClicked = this.addTodoClicked.bind(this)\n      // this.refreshTodos = this.refreshTodos.bind(this)\n\n    };\n    return _this;\n  } // componentWillUnmount = () => {\n  //     console.log('componentWillUnmount')\n  // }\n  // shouldComponentUpdate = (nextProps, nextState) => {\n  //     console.log('shouldComponentUpdate')\n  //     console.log(nextProps)\n  //     console.log(nextState)\n  //     return true\n  // }\n\n\n  _createClass(ListTodosComponent, [{\n    key: \"render\",\n    value: function render() {\n      var _this2 = this;\n\n      console.log('render');\n      return React.createElement(\"div\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 91\n        },\n        __self: this\n      }, React.createElement(\"h1\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 92\n        },\n        __self: this\n      }, \"List Todos\"), this.state.message && React.createElement(\"div\", {\n        className: \"alert alert-success\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 93\n        },\n        __self: this\n      }, this.state.message), React.createElement(\"div\", {\n        className: \"container\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 94\n        },\n        __self: this\n      }, React.createElement(\"table\", {\n        className: \"table\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 95\n        },\n        __self: this\n      }, React.createElement(\"thead\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 96\n        },\n        __self: this\n      }, React.createElement(\"tr\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 97\n        },\n        __self: this\n      }, React.createElement(\"th\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 98\n        },\n        __self: this\n      }, \"Description\"), React.createElement(\"th\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 99\n        },\n        __self: this\n      }, \"Target Date\"), React.createElement(\"th\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 100\n        },\n        __self: this\n      }, \"IsCompleted?\"), React.createElement(\"th\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 101\n        },\n        __self: this\n      }, \"Update\"), React.createElement(\"th\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 102\n        },\n        __self: this\n      }, \"Delete\"))), React.createElement(\"tbody\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 105\n        },\n        __self: this\n      }, this.state.todos.map(function (e) {\n        return React.createElement(\"tr\", {\n          key: e.id,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 109\n          },\n          __self: this\n        }, React.createElement(\"td\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 110\n          },\n          __self: this\n        }, e.description), React.createElement(\"td\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 111\n          },\n          __self: this\n        }, moment(e.targetDate).format('YYYY-MM-DD')), React.createElement(\"td\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 112\n          },\n          __self: this\n        }, e.done.toString()), React.createElement(\"td\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 113\n          },\n          __self: this\n        }, React.createElement(\"button\", {\n          className: \"btn btn-success\",\n          onClick: function onClick() {\n            return _this2.updateTodoClicked(e.id);\n          },\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 113\n          },\n          __self: this\n        }, \"Update\")), React.createElement(\"td\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 114\n          },\n          __self: this\n        }, React.createElement(\"button\", {\n          className: \"btn btn-warning\",\n          onClick: function onClick() {\n            return _this2.deleteTodoClicked(e.id);\n          },\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 114\n          },\n          __self: this\n        }, \"Delete\")));\n      }))), React.createElement(\"div\", {\n        className: \"row\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 120\n        },\n        __self: this\n      }, React.createElement(\"button\", {\n        className: \"btn btn-success\",\n        onClick: this.addTodoClicked,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 121\n        },\n        __self: this\n      }, \"Add\"))));\n    }\n  }]);\n\n  return ListTodosComponent;\n}(Component);\n\nexport default ListTodosComponent;","map":{"version":3,"sources":["C:\\IT\\Javascript\\2. React\\todo-app-web\\src\\components\\todo\\ListTodosComponent.jsx"],"names":["React","Component","TodoDataService","AuthenticationService","moment","ListTodosComponent","props","console","log","componentDidMount","refreshTodos","state","username","getLoggedInUserName","retrieveAllTodos","then","response","setState","todos","data","e","deleteTodoClicked","id","deleteTodo","message","addTodoClicked","history","push","updateTodoClicked","map","description","targetDate","format","done","toString"],"mappings":"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","sourcesContent":["import React, {Component} from 'react'\nimport TodoDataService from '../../api/todo/TodoDataService.js'\nimport AuthenticationService from './AuthenticationService.js'\nimport moment from 'moment'\n\nclass ListTodosComponent extends Component {\n\n    constructor(props){     // accept props\n        console.log('constructor')\n        super(props)        // pass props to super class\n        this.state = {\n            todos : [],\n            message : null\n        }\n        // this.deleteTodoClicked = this.deleteTodoClicked.bind(this)   \n        // this.updateTodoClicked = this.updateTodoClicked.bind(this)   \n        // this.addTodoClicked = this.addTodoClicked.bind(this)\n        // this.refreshTodos = this.refreshTodos.bind(this)\n    }\n\n    // componentWillUnmount = () => {\n    //     console.log('componentWillUnmount')\n    // }\n    \n    // shouldComponentUpdate = (nextProps, nextState) => {\n    //     console.log('shouldComponentUpdate')\n    //     console.log(nextProps)\n    //     console.log(nextState)\n    //     return true\n    // }\n\n    componentDidMount = () => {\n        console.log('componentDidMount')\n        this.refreshTodos();\n        console.log(this.state)\n    }\n\n    refreshTodos = () => {\n        try{\n            let username = AuthenticationService.getLoggedInUserName()\n            TodoDataService.retrieveAllTodos(username)\n            .then(\n                response => {\n                    //console.log(response);\n                    this.setState({todos : response.data})\n                }\n            ) \n        } catch (e) {\n            console.log(e.response) // undefined\n        }\n        \n    }\n\n    deleteTodoClicked = (id) => {\n        let username = AuthenticationService.getLoggedInUserName()\n        console.log('#1 ',id + \" \" + username);\n        TodoDataService.deleteTodo(username, id)\n        console.log('#3 ',id + \" \" + username)\n        .then (\n            response => {\n                this.setState({message : `Delete of todo ${id} Successful`})\n                this.refreshTodos()\n            }\n         )\n        \n    }\n\n    addTodoClicked = () => {\n        this.props.history.push(`/todos/-1`)\n    }\n\n    updateTodoClicked = (id) => {\n        console.log('update ' + id)\n        this.props.history.push(`/todos/${id}`)\n        // /todos/${id}\n        // let username = AuthenticationService.getLoggedInUserName()\n        // //console.log(id + \" \" + username);\n        // TodoDataService.deleteTodo(username, id)\n        //  .then (\n        //      response => {\n        //         this.setState({message : `Delete of todo ${id} Successful`})\n        //         this.refreshTodos()\n        //      }\n        //  )\n        \n    }\n\n    render() {\n        console.log('render')\n        return (\n            <div>\n                 <h1>List Todos</h1>\n                 {this.state.message && <div className=\"alert alert-success\">{this.state.message}</div>}\n                 <div className=\"container\">\n                    <table className=\"table\">\n                        <thead>\n                            <tr>\n                                <th>Description</th>\n                                <th>Target Date</th>\n                                <th>IsCompleted?</th>\n                                <th>Update</th>\n                                <th>Delete</th>\n                            </tr>\n                        </thead>\n                        <tbody>\n                        {\n                            this.state.todos.map (\n                                e =>\n                                    <tr key={e.id}>\n                                        <td>{e.description}</td>\n                                        <td>{moment(e.targetDate).format('YYYY-MM-DD')}</td>\n                                        <td>{e.done.toString()}</td>\n                                        <td><button className=\"btn btn-success\" onClick={() => this.updateTodoClicked(e.id)}>Update</button></td>\n                                        <td><button className=\"btn btn-warning\" onClick={() => this.deleteTodoClicked(e.id)}>Delete</button></td>\n                                    </tr>\n                            )\n                            }\n                        </tbody>\n                    </table>\n                    <div className=\"row\">\n                        <button className=\"btn btn-success\" onClick={this.addTodoClicked}>Add</button>\n                    </div>\n                 </div>\n            </div>\n        )\n    }\n}\n\nexport default ListTodosComponent"]},"metadata":{},"sourceType":"module"}